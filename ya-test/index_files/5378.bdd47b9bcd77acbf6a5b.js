"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5378],{11890:function(e,t,r){r.d(t,{NQ:function(){return i},XJ:function(){return s},pm:function(){return a}}),r(19601);var n=r(87735),o=r(6896);function i(e){if(!e)return!1;var t=e.type,r=e.mp4Url,n=e.webmUrl,i=e.streamSrc,s=e.youtubeSrc,a=e.vimeoSrc,c=e.vkVideoSrc,l=e.vhSrc,u=e.yandexCloudSrc,p=e.stub;return t===o.Z.Uploaded?Boolean(r||n):t===o.Z.Stream?Boolean(i):t===o.Z.Youtube?Boolean(s):t===o.Z.Vimeo?Boolean(a):t===o.Z.VkVideo?Boolean(c):t===o.Z.VH?Boolean(l)||Boolean(p):t===o.Z.YandexCloud&&(Boolean(u)||""===u)}function s(e){var t=parseFloat(String(e));return isNaN(t)?void 0:t+"px"}function a(e,t){var r=t?(0,n.parse)(t):{};return Object.assign(e,r)}},75378:function(e,t,r){r.r(t),r.d(t,{LcVideoBlock:function(){return Ve},LcVideoBlockComponent:function(){return Re}}),r(81299),r(12419),r(47941),r(82526),r(57327),r(88449),r(2490),r(59849),r(38880),r(57658),r(15581),r(34514),r(54747),r(49337);var n=r(29439),o=r(15671),i=r(43144),s=r(60136),a=r(82963),c=r(61120),l=r(4942),u=(r(92222),r(74916),r(4723),r(66992),r(41539),r(78783),r(33948),r(60285),r(41637),r(77601),r(73210),r(47042),r(87735)),p=r(87363),d=r(14134),y=r(63487),f=r(41799),h=r(5834),v=r(24695),m=r(8729),b=r(50439),O=r(47330),g=r(30633),w=r(46127),P=r(20703),j=r(83616),Z=r(14544),k=r(45987),S=r(97326),I=r(99724),x=r(25673),R=r(85893),V=["src","visibilityRootRef","isVisible","isIntersecting","children","unobserve"];function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B=function(e){(0,s.Z)(u,e);var t,r,n=(t=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function u(){var e;(0,o.Z)(this,u);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=n.call.apply(n,[this].concat(r)),(0,l.Z)((0,S.Z)(e),"state",{isMounted:!1}),e}return(0,i.Z)(u,[{key:"renderBordersWrapper",value:function(e){var t=this.props.bordersWrapper;return t?(0,R.jsx)(Z.LcBorders,U(U({isComponentWrapper:!0},t),{},{children:e})):e}},{key:"componentDidMount",value:function(){this.setState({isMounted:!0})}},{key:"render",value:function(){var e=this.props,t=e.src,r=e.visibilityRootRef,n=e.isVisible,o=e.isIntersecting,i=(e.children,e.unobserve,(0,k.Z)(e,V)),s=this.state.isMounted&&(h.h||n||o);return this.renderBordersWrapper((0,R.jsx)("iframe",U(U({},i),{},{src:s?t:void 0,ref:r})))}}]),u}(p.PureComponent),D=(0,I.g)(x.nb)(B),A=["mp4Url","webmUrl","visibilityRootRef","isVisible","isIntersecting","children","unobserve"];function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=function(e){(0,s.Z)(l,e);var t,r,n=(t=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function l(){return(0,o.Z)(this,l),n.apply(this,arguments)}return(0,i.Z)(l,[{key:"renderBordersWrapper",value:function(e){var t=this.props.bordersWrapper;return t?(0,R.jsx)(Z.LcBorders,W(W({isComponentWrapper:!0},t),{},{children:e})):e}},{key:"render",value:function(){var e=this.props,t=e.mp4Url,r=e.webmUrl,n=e.visibilityRootRef,o=e.isVisible,i=e.isIntersecting,s=(e.children,e.unobserve,(0,k.Z)(e,A)),a=h.h||o||i;return this.renderBordersWrapper((0,R.jsxs)("video",W(W({},s),{},{ref:n,children:[t&&a&&(0,R.jsx)("source",{src:t,type:"video/mp4"}),r&&a&&(0,R.jsx)("source",{src:r,type:"video/webm"})]})))}}]),l}(p.PureComponent),_=(0,I.g)(x.nb)(E),F=r(6896),M=r(11890),L=r(93433),Y=(r(64211),r(41874),r(55877)),H=r(42881);var Q=function(e){(0,s.Z)(u,e);var t,r,n=(t=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function u(){var e;(0,o.Z)(this,u);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=n.call.apply(n,[this].concat(r)),(0,l.Z)((0,S.Z)(e),"state",{isUserPlay:e.props.autoplay,wasPlayerControlled:!1,isPlay:e.props.autoplay}),(0,l.Z)((0,S.Z)(e),"onPlay",(function(){e.setState((function(e){var t=e.isUserPlay;return e.wasPlayerControlled?{isUserPlay:t,wasPlayerControlled:!1,isPlay:!0}:{isUserPlay:!0,wasPlayerControlled:!1,isPlay:!0}}))})),(0,l.Z)((0,S.Z)(e),"onPause",(function(){e.setState((function(e){var t=e.isUserPlay;return e.wasPlayerControlled?{isUserPlay:t,wasPlayerControlled:!1,isPlay:!1}:{isUserPlay:!1,wasPlayerControlled:!1,isPlay:!1}}))})),e}return(0,i.Z)(u,[{key:"isShown",get:function(){var e=this.props,t=e.isIntersecting,r=e.isVisible;return t||r}},{key:"componentDidUpdate",value:function(e,t){var r=this,n=this.props,o=n.playOnInvisible,i=n.player,s=n.eventsOnPause,a=n.eventsOnPlay,c=this.state,l=c.isPlay,u=c.isUserPlay,p=c.wasPlayerControlled;o||!i||e.player||(s.forEach((function(e){i.on(e,r.onPause)})),a.forEach((function(e){i.on(e,r.onPlay)}))),l===t.isPlay&&u===t.isUserPlay&&p||!o&&i&&u&&(this.isShown&&!l&&(this.setState({wasPlayerControlled:!0}),i.play()),!this.isShown&&l&&(this.setState({wasPlayerControlled:!0}),i.pause()))}},{key:"render",value:function(){return this.props.container}}]),u}(p.PureComponent),J=["contentId","visibilityRootRef","isVisible","isIntersecting","unobserve","playOnInvisible","params"];function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var z=["play"],K=["pause"],X=(0,d.Z)("lc-video-block"),q=function(e){(0,s.Z)(p,e);var t,r,n=(t=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function p(){var e;(0,o.Z)(this,p);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=n.call.apply(n,[this].concat(r)),(0,l.Z)((0,S.Z)(e),"containerId",(0,Y.v4)()),(0,l.Z)((0,S.Z)(e),"state",{vimeoUrl:"",wasScriptAttached:!1,player:null,isPlaying:!1}),(0,l.Z)((0,S.Z)(e),"onClick",(function(){var t=e.props.params,r=t.controls,n=t.autoplay,o=e.state,i=o.player,s=o.isPlaying;r||!i||n||(s?(i.pause(),e.setState({isPlaying:!1})):(i.play(),e.setState({isPlaying:!0})))})),e}return(0,i.Z)(p,[{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.params,n=t.contentId,o=t.isIntersecting,i=t.isVisible,s=[].concat((0,L.Z)(Object.keys(r)),(0,L.Z)(Object.keys(e.params))).some((function(t){return e.params[t]!==r[t]}));n&&(i||o||h.h)&&!this.state.wasScriptAttached?(this.setState({vimeoUrl:"https://player.vimeo.com/video/".concat(n,"?").concat((0,u.stringify)($($({},r),{},{autoplay:this.isAutoplay}))),wasScriptAttached:!0}),this.attachPlayerScript()):n&&h.h&&s&&this.setState({vimeoUrl:"https://player.vimeo.com/video/".concat(n,"?").concat((0,u.stringify)($($({},r),{},{autoplay:this.isAutoplay})))})}},{key:"isAutoplay",get:function(){var e=this.props,t=e.params,r=e.playOnInvisible,n=e.isVisible,o=e.isIntersecting;return t.autoplay&&(r||n||o)}},{key:"attachPlayerScript",value:function(){var e=this;(0,H.$)("//yastatic.net/s3/lpc-ext/static/_lib/vimeo/2.20.1/vimeo.js").then((function(){e.initPlayer()}))}},{key:"initPlayer",value:function(){var e,t,r,n,o=window.Vimeo,i=this.props,s=i.params,a=i.contentId;o&&a&&null!==(e=this.props.visibilityRootRef)&&void 0!==e&&null!==(t=e.current)&&void 0!==t&&t.id&&this.setState({player:new o.Player(null===(r=this.props.visibilityRootRef)||void 0===r||null===(n=r.current)||void 0===n?void 0:n.id,$({contentId:a},$($({},s),{},{autoplay:this.isAutoplay})))}),o||console.error("Vimeo script was attached, but there is no Vimeo in window")}},{key:"renderOverlay",value:function(){var e=this.props.params,t=e.controls,r=e.autoplay;return t||h.h||r?null:(0,R.jsx)("div",{className:X("overlay",{vimeo:!0})(),onClick:this.onClick})}},{key:"container",get:function(){var e=this.props,t=(e.contentId,e.visibilityRootRef),r=(e.isVisible,e.isIntersecting,e.unobserve,e.playOnInvisible,e.params,(0,k.Z)(e,J));return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("iframe",$({src:this.state.vimeoUrl,id:this.containerId,frameBorder:"no",scrolling:"no",allowFullScreen:!0,ref:t},r),this.containerId),this.renderOverlay()]})}},{key:"render",value:function(){var e=this.props,t=e.playOnInvisible,r=e.params.autoplay,n=e.isIntersecting,o=e.isVisible,i=Boolean(r);return(0,R.jsx)(Q,{player:this.state.player,autoplay:i,eventsOnPlay:z,eventsOnPause:K,container:this.container,playOnInvisible:t,isIntersecting:n,isVisible:o})}}]),p}(p.PureComponent),G=(0,I.g)({enableRoot:!1})(q),ee=["contentId","visibilityRootRef","isVisible","isIntersecting","unobserve","playOnInvisible","params"];function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ne=["started","resumed"],oe=["paused"],ie=(0,d.Z)("lc-video-block"),se=function(e){(0,s.Z)(u,e);var t,r,n=(t=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function u(){var e;(0,o.Z)(this,u);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=n.call.apply(n,[this].concat(r)),(0,l.Z)((0,S.Z)(e),"containerId",(0,Y.v4)()),(0,l.Z)((0,S.Z)(e),"state",{wasScriptAttached:!1,player:null,isPlaying:!1,isStarted:!1}),(0,l.Z)((0,S.Z)(e),"handleClick",(function(){var t=e.props.params,r=t.hidden,n=t.autoplay,o=e.state,i=o.player,s=o.isPlaying;r&&i&&!n&&(s?i.pause():i.play(),e.setState((function(e){return{isPlaying:!e.isPlaying}})))})),e}return(0,i.Z)(u,[{key:"isAutoplay",get:function(){var e=this.props,t=e.params,r=e.playOnInvisible,n=e.isVisible,o=e.isIntersecting;return t.autoplay&&(r||n||o)}},{key:"attachPlayerScript",value:function(){var e=this;(0,H.$)("//yastatic.net/vh-player/loader.js").then((function(){e.initPlayer()}))}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.contentId,n=t.isIntersecting,o=t.isVisible,i=t.params,s=[].concat((0,L.Z)(Object.keys(i)),(0,L.Z)(Object.keys(e.params))).some((function(t){return e.params[t]!==i[t]})),a=r!==e.contentId;if(r&&(n||o||h.h)&&!this.state.wasScriptAttached)this.setState({wasScriptAttached:!0}),this.attachPlayerScript();else if(r&&h.h&&(s||a)){var c;null===(c=this.state.player)||void 0===c||c.destroy(),this.setState({isStarted:!1}),this.initPlayer()}}},{key:"initPlayer",value:function(){var e,t,r,n,o,i,s=this,a=null===(e=window.Yandex)||void 0===e?void 0:e.VH,c=this.props,l=c.params,u=c.contentId;a&&u&&null!==(t=this.props.visibilityRootRef)&&void 0!==t&&null!==(r=t.current)&&void 0!==r&&r.id&&(this.setState({player:new a.Player(null===(n=this.props.visibilityRootRef)||void 0===n||null===(o=n.current)||void 0===o?void 0:o.id,{contentId:u,params:re(re({},l),{},{autoplay:this.isAutoplay?1:0})})}),null===(i=this.state.player)||void 0===i||i.on("started",(function(){return s.setState({isStarted:!0,isPlaying:!0})}))),a||console.error("VH script was attached, but there is no VH in window")}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.state.player)||void 0===e||e.destroy()}},{key:"renderOverlay",value:function(){var e=this.props.params,t=e.hidden,r=e.autoplay,n=this.state.isStarted,o=t===x.JZ;return!t||t&&!o||h.h||r||!n?null:(0,R.jsx)("div",{className:ie("overlay",{vh:!0})(),onClick:this.handleClick})}},{key:"container",get:function(){var e=this.props,t=(e.contentId,e.visibilityRootRef),r=(e.isVisible,e.isIntersecting,e.unobserve,e.playOnInvisible,e.params,(0,k.Z)(e,ee));return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",re({id:this.containerId,ref:t},r),this.containerId),this.renderOverlay()]})}},{key:"render",value:function(){var e=this.props,t=e.playOnInvisible,r=e.params.autoplay,n=e.isIntersecting,o=e.isVisible,i=Boolean(r);return(0,R.jsx)(Q,{player:this.state.player,autoplay:i,eventsOnPlay:ne,eventsOnPause:oe,container:this.container,playOnInvisible:t,isIntersecting:n,isVisible:o})}}]),u}(p.PureComponent),ae=(0,I.g)({enableRoot:!1})(se),ce=(r(69600),["contentId","visibilityRootRef","isVisible","isIntersecting","unobserve","params","className"]);function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pe=(0,d.Z)("lc-video-block"),de={width:"100%",height:"100%"},ye=function(e){(0,s.Z)(p,e);var t,r,n=(t=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function p(){var e;(0,o.Z)(this,p);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=n.call.apply(n,[this].concat(r)),(0,l.Z)((0,S.Z)(e),"containerId",(0,Y.v4)()),(0,l.Z)((0,S.Z)(e),"eventsId",parseInt(e.containerId.split("-").join(""),16)),(0,l.Z)((0,S.Z)(e),"state",{isStart:!1,isShown:!1,isPlaying:!1}),(0,l.Z)((0,S.Z)(e),"onIframePost",(function(t){if("https://www.youtube.com"===t.origin&&t.data){var r=JSON.parse(t.data);if(r.id===e.eventsId&&r.info){var n=r.info.playerState;1===n&&e.setState({isStart:!0,isPlaying:!0}),0===n&&e.setState({isStart:!1,isPlaying:!1})}}})),(0,l.Z)((0,S.Z)(e),"handleClick",(function(){var t,r,n,o,i,s=e.props,a=s.visibilityRootRef,c=s.params,l=c.autoplay,u=c.mute,p=e.state.isPlaying;null==a||null===(t=a.current)||void 0===t||!t.contentWindow||"1"===l&&"1"===u||(p?null==a||null===(r=a.current)||void 0===r||null===(n=r.contentWindow)||void 0===n||n.postMessage('{"event":"command","id":'.concat(e.eventsId,',"func":"pauseVideo","channel":"widget"}'),"*"):null==a||null===(o=a.current)||void 0===o||null===(i=o.contentWindow)||void 0===i||i.postMessage('{"event":"command","id":'.concat(e.eventsId,',"func":"playVideo","channel":"widget"}'),"*"),e.setState((function(e){return{isPlaying:!e.isPlaying}})))})),e}return(0,i.Z)(p,[{key:"componentDidUpdate",value:function(){var e,t=this,r=this.props,n=r.contentId,o=r.isIntersecting,i=r.isVisible,s=r.visibilityRootRef;n&&(i||o||h.h)&&!this.state.isShown&&(this.setState({isShown:!0}),null==s||null===(e=s.current)||void 0===e||e.addEventListener("load",(function(){var e,r;null==s||null===(e=s.current)||void 0===e||null===(r=e.contentWindow)||void 0===r||r.postMessage('{"event":"listening","id":'.concat(t.eventsId,',"channel":"widget"}'),"*"),window.addEventListener("message",t.onIframePost)})))}},{key:"renderOverlay",value:function(){var e=this.props.params,t=e.controls,r=e.autoplay,n=e.mute;return"0"===t&&("1"===r&&"1"===n||this.state.isStart)?(0,R.jsx)("div",{className:pe("overlay")(),onClick:this.handleClick}):null}},{key:"youtubeUrl",get:function(){return"https://www.youtube.com/embed/".concat(this.props.contentId,"?").concat((0,u.stringify)(this.props.params))}},{key:"render",value:function(){var e=this.state,t=e.isStart,r=e.isShown,n=this.props,o=(n.contentId,n.visibilityRootRef),i=(n.isVisible,n.isIntersecting,n.unobserve,n.params),s=n.className,a=(0,k.Z)(n,ce),c="0"===i.controls&&t?{height:"calc(100% + 1000px)",margin:"-500px 0 0 0"}:{};return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)("div",{style:{overflow:"hidden"},className:s,children:[(0,R.jsx)("iframe",ue({src:r?this.youtubeUrl:void 0,ref:o,id:this.containerId,frameBorder:"no",scrolling:"no",allowFullScreen:!0,style:ue(ue({},de),c)},a),this.containerId),this.renderOverlay()]})})}}]),p}(p.PureComponent),fe=(0,I.g)({enableRoot:!1})(ye),he=["contentId","params","className"];function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var be={width:"100%",height:"100%"},Oe=function(e){(0,s.Z)(p,e);var t,r,n=(t=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function p(){var e;(0,o.Z)(this,p);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=n.call.apply(n,[this].concat(r)),(0,l.Z)((0,S.Z)(e),"containerId",(0,Y.v4)()),(0,l.Z)((0,S.Z)(e),"state",{yandexCloudUrl:""}),e}return(0,i.Z)(p,[{key:"componentDidUpdate",value:function(){h.h&&this.setState({yandexCloudUrl:this.getYandexCloudUrl()})}},{key:"componentDidMount",value:function(){this.setState({yandexCloudUrl:this.getYandexCloudUrl()})}},{key:"getYandexCloudUrl",value:function(){return"".concat(this.props.contentId,"?").concat((0,u.stringify)(me(me({},this.props.params),{},{autoplay:!h.h&&this.props.params.autoplay?1:0,play_on_visible:!h.h&&this.props.params.play_on_visible})))}},{key:"render",value:function(){var e=this.props,t=(e.contentId,e.params,e.className),r=(0,k.Z)(e,he);return(0,R.jsx)(R.Fragment,{children:(0,R.jsx)("div",{style:{overflow:"hidden"},className:t,children:(0,R.jsx)("iframe",me({src:this.state.yandexCloudUrl,id:this.containerId,frameBorder:"no",allow:"autoplay; fullscreen; encrypted-media; accelerometer; gyroscope; picture-in-picture; clipboard-write; web-share; screen-wake-lock",style:me({},be)},r),this.containerId)})})}}]),p}(p.PureComponent),ge=Oe,we=["params","className"];function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ze={width:"100%",height:"100%"},ke=function(e){(0,s.Z)(p,e);var t,r,n=(t=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function p(){var e;(0,o.Z)(this,p);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=n.call.apply(n,[this].concat(r)),(0,l.Z)((0,S.Z)(e),"containerId",(0,Y.v4)()),(0,l.Z)((0,S.Z)(e),"state",{vkVideoUrl:""}),e}return(0,i.Z)(p,[{key:"componentDidUpdate",value:function(){h.h&&this.setState({vkVideoUrl:this.getVkVideoUrl()})}},{key:"componentDidMount",value:function(){this.setState({vkVideoUrl:this.getVkVideoUrl()})}},{key:"getVkVideoUrl",value:function(){var e=this.props.params;return"https://vk.com/video_ext.php?".concat((0,u.stringify)(e))}},{key:"render",value:function(){var e=this.props,t=(e.params,e.className),r=(0,k.Z)(e,we);return(0,R.jsx)(R.Fragment,{children:(0,R.jsx)("div",{style:{overflow:"hidden"},className:t,children:(0,R.jsx)("iframe",je({src:this.state.vkVideoUrl,id:this.containerId,frameBorder:"no",referrerPolicy:"no-referrer",allow:"autoplay; encrypted-media; fullscreen; picture-in-picture; screen-wake-lock;",allowFullScreen:!0,sandbox:"allow-scripts allow-popups allow-same-origin",style:je({},Ze)},r),this.containerId)})})}}]),p}(p.PureComponent);function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xe=(0,d.Z)("lc-video-block"),Re=function(e){(0,s.Z)(p,e);var t,r,l=(t=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function p(){return(0,o.Z)(this,p),l.apply(this,arguments)}return(0,i.Z)(p,[{key:"styles",get:function(){return{"--video-block-width":this.props.customWidth||"100%"}}},{key:"videoStyles",get:function(){var e=this.props.video,t=e.ratio,r=e.customRatioPx,n=void 0===r?x.VS:r;return t!==F.B.Custom?{}:{width:(0,M.XJ)(n.width),height:(0,M.XJ)(n.height)}}},{key:"isReducedMotionOn",get:function(){return f.N&&window.matchMedia("(prefers-reduced-motion: reduce)").matches||!1}},{key:"isAutoplay",get:function(){return this.props.video.autoplay&&!h.h&&!this.isReducedMotionOn}},{key:"isControlShown",get:function(){return this.props.video.showControls||this.isReducedMotionOn}},{key:"render",value:function(){var e=this,t=this.props,r=t.video,n=t.mix,o=void 0===n?"":n,i=t.resizerMix,s=void 0===i?"":i,a=t.width,c=t.customWidth,l=t.hasBreakpoints,u=void 0!==l&&l,p=r.ratio,d=void 0===p?"":p,y=r.mask;if(!(0,M.NQ)(r))return null;var f=Ie(Ie({"in-grid2":(0,j.TO)(this.props),"has-breakpoints":u},a&&{width:a}),{},{"custom-width":Boolean(c)});return(0,R.jsx)("div",{className:xe.mix(o)(f)(),style:this.styles,children:(0,R.jsx)(P.f,{value:y,children:function(t){return(0,R.jsx)("div",{className:xe.mix(s)("resizer",{ratio:d})(),style:e.videoStyles,children:(0,R.jsxs)("div",{className:xe("content")(),style:t,children:[e.renderVideo(),h.h&&(0,R.jsx)("div",{className:xe("disable-layer")()}),e.renderVideoStub()]})})}})})}},{key:"renderVideo",value:function(){var e=this.props,t=e.video,r=t.type,n=t.mp4Url,o=t.webmUrl,i=t.loop,s=t.muted,a=e.bordersWrapper,c=e.userQuery,l=c?"?".concat(c):"";return r===F.Z.Uploaded?(0,R.jsx)(_,{className:xe("video-object")(),autoPlay:this.isAutoplay,playsInline:this.isAutoplay,loop:i,muted:s,controls:this.isControlShown,preload:"auto",mp4Url:n&&"".concat(n).concat(l),webmUrl:o&&"".concat(o).concat(l),bordersWrapper:(0,j.TO)(this.props)?void 0:a}):r===F.Z.Vimeo?this.renderVimeoVideo():r===F.Z.VH?this.renderVHVideo():r===F.Z.Youtube?this.renderYoutubeVideo():r===F.Z.YandexCloud?this.renderYandexCloudVideo():r===F.Z.VkVideo?this.renderVkVideo():(0,R.jsx)(D,{className:xe("video-object")(),src:this.getIframeUrl(),frameBorder:"no",scrolling:"no",bordersWrapper:a,allowFullScreen:!0})}},{key:"renderBordersWrapper",value:function(e){var t=this.props.bordersWrapper;return t?(0,R.jsx)(Z.LcBorders,Ie(Ie({isComponentWrapper:!0},t),{},{children:e})):e}},{key:"renderYoutubeVideo",value:function(){var e=this.props,t=e.video,r=t.loop,n=t.muted,o=t.youtubeSrc,i=void 0===o?"":o,s=e.userQuery,a=-1===i.indexOf("youtube.com")&&-1===i.indexOf("youtu.be")?i:this.extractYoutubeIdFromUrl(i),c={loop:r?"1":"0",autoplay:this.isAutoplay?"1":"0",mute:n?"1":"0",controls:this.isControlShown?"1":"0",disablekb:this.isControlShown?"0":"1",rel:"0",enablejsapi:"1"};r&&(c.playlist=a);var l=s?(0,u.parse)(s):{};return this.renderBordersWrapper((0,R.jsx)(fe,{params:Ie(Ie({},c),l),contentId:a,className:xe("video-object")()}))}},{key:"renderVimeoVideo",value:function(){var e=this.props,t=e.video,r=t.loop,n=t.muted,o=t.playOnInvisible,i=e.userQuery,s=i?(0,u.parse)(i):{},a=Ie({loop:r,autoplay:this.isAutoplay,muted:n,autopause:!1,controls:this.isControlShown,keyboard:this.isControlShown},s);return this.renderBordersWrapper((0,R.jsx)(G,{contentId:this.extractVimeoIdFromUrl(this.props.video.vimeoSrc||""),params:a,playOnInvisible:o,className:xe("video-object")()}))}},{key:"renderVkVideo",value:function(){var e=this.props,t=e.video,r=t.loop,n=t.vkVideoSrc,o=void 0===n?"":n,i=e.userQuery,s=i?(0,u.parse)(i):{},a=Ie(Ie({},this.extractVkVideoIdsFromUrl(o)),{},{loop:r?1:0,autoplay:this.isAutoplay?1:0},s);return this.renderBordersWrapper((0,R.jsx)(ke,{params:a,className:xe("video-object")()}))}},{key:"renderVHVideo",value:function(){var e=this.props,t=e.video,r=t.loop,n=t.muted,o=t.vhChannel,i=t.poster,s=t.playOnInvisible,a=e.isScreenshotMode,c=e.userQuery;if(a)return null;var l=this.extractVHIdFromUrl(this.props.video.vhSrc||""),p=c?(0,u.parse)(c):{},d={loop:r?1:0,autoplay:this.isAutoplay?1:0,mute:n?1:0,object_fit:"cover"};return o&&(d.from=o),this.isControlShown||(d.hidden=x.JZ),i&&(d.preview_src=i),this.renderBordersWrapper((0,R.jsx)(ae,{params:Ie(Ie({},d),p),contentId:l,playOnInvisible:s,className:xe("video-object")()}))}},{key:"renderYandexCloudVideo",value:function(){var e=this.props,t=e.video,r=t.loop,n=t.muted,o=t.yandexCloudSrc,i=void 0===o?"":o,s=t.poster,a=t.vhChannel,c=e.userQuery,l=this.getYandexCloudVideo(i),p={loop:r?1:0,autoplay:this.isAutoplay?1:0,mute:n?1:0};a&&(p.from=a),s&&(p.preview_src=s),this.isControlShown||(p.hidden=x.fE);var d=c?(0,u.parse)(c):{};return this.renderBordersWrapper((0,R.jsx)(ge,{params:Ie(Ie({},p),d),contentId:l,className:xe("video-object")()}))}},{key:"renderVideoStub",value:function(){var e=this.props,t=e.video,r=t.type,n=t.stub,o=e.isScreenshotMode;if((h.h||o)&&r===F.Z.VH&&n){var i={backgroundImage:"url(".concat(n,")")};return(0,R.jsx)("div",{className:xe("vh-player-stub")(),style:i})}return null}},{key:"getIframeUrl",value:function(){var e=this.props.video,t=e.streamSrc,r=void 0===t?"":t,n=e.loop,o=e.muted,i=e.showControls,s=e.player,a=void 0===s?x.db:s;if(!this.isHSL(r))return console.warn("Ожидается ссылка формата .m3u8"),"";var c={loop:n,muted:o,autoplay:this.isAutoplay,hq_url:r};return i||(c.hidden="*"),"".concat(a.host,"/").concat(a.version,"/?").concat((0,u.stringify)((0,M.pm)(c,this.props.userQuery)))}},{key:"extractYoutubeIdFromUrl",value:function(e){var t=e.match(x.uo);return t?t[1]:""}},{key:"extractVimeoIdFromUrl",value:function(e){var t=e.match(x.a2);return t?t[2]:e}},{key:"extractVkVideoIdsFromUrl",value:function(e){var t=e.match(x.k6);if(t){var r=new URL(t[0]).searchParams;return r.has("oid")&&r.has("id")?{oid:r.get("oid"),id:r.get("id")}:null}var o=e.match(x.MW);if(!o)return null;var i=o[2].split("_"),s=(0,n.Z)(i,2);return{oid:s[0],id:s[1]}}},{key:"extractVHIdFromUrl",value:function(e){var t=e.match(x.rY);return t?t[1]||t[2]:e}},{key:"getYandexCloudVideo",value:function(e){if(!x.Tm.test(e))return x.pO;var t=e.indexOf("?");return-1!==t?e.slice(0,t).trim():e.trim()}},{key:"isHSL",value:function(e){return/\.m3u8$/.test(e)}}]),p}(p.PureComponent);(0,l.Z)(Re,"defaultProps",{mix:""});var Ve=(0,y.qC)((0,b.$)("LcVideoBlock"),(0,w.K)((function(e){return{isScreenshotMode:(0,v.Tz)(e)}})),m.H,g.W,O.V)(Re)},4723:function(e,t,r){var n=r(46916),o=r(27007),i=r(19670),s=r(68554),a=r(17466),c=r(41340),l=r(84488),u=r(58173),p=r(31530),d=r(97651);o("match",(function(e,t,r){return[function(t){var r=l(this),o=s(t)?void 0:u(t,e);return o?n(o,t,r):new RegExp(t)[e](c(r))},function(e){var n=i(this),o=c(e),s=r(t,n,o);if(s.done)return s.value;if(!n.global)return d(n,o);var l=n.unicode;n.lastIndex=0;for(var u,y=[],f=0;null!==(u=d(n,o));){var h=c(u[0]);y[f]=h,""===h&&(n.lastIndex=p(o,a(n.lastIndex),l)),f++}return 0===f?null:y}]}))}}]);